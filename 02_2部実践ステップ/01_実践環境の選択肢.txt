■第1章：実践環境の選択肢
― Kubernetes はどこで動かすのか ―

この章の目的

Kubernetes を実践する、と言ったとき、まず最初に立ち止まって考える必要があるのが、
「どこで Kubernetes を動かすのか」という点です。

Kubernetes は、特定の環境専用に作られた仕組みではありません。

・ローカルマシン上
・クラウド上
・学習・検証用の一時的な環境

など、さまざまな前提の上で動かすことができます。

この章では、代表的な実践環境の選択肢を整理しながら、
Kubernetesは環境ごとに前提が異なるという点を確認します。


■なぜ、環境の話から始めるのか
いきなり操作に入ってしまうと、次のようなことが起こりがちです。

・手順通りにやったのに動かない
・本に書いてある通りなのに挙動が違う
・何が原因か分からず詰まる

多くの場合、これはKubernetesの理解不足ではありません。
実践している「環境の前提」が違うことが原因です。

そのため第2部では、操作やコマンドの前に、
「どんな前提の環境で試しているのか」を明確にするところから始めます。


■Kubernetesを動かす主な選択肢
※補足：この章で扱う実行環境について

ここで紹介する Minikube / Kind / k3s / Docker Desktop は、
主に 学習・検証を目的とした Kubernetes 実行環境です。

実際のサービス運用では、
kubeadm による構築や、EKS / GKE / AKS といった
マネージド Kubernetes を利用するケースが一般的です。

本章では、
「本番ではどれを使うべきか」を決めることは目的としておらず、
Kubernetes を動かし、挙動や前提を理解するための
学習環境としての選択肢を整理しています。

ここでは、Kubernetesを試す際によく使われる代表的な環境を見ていきます。

重要なのは、どれが一番良いかを決めることではありません。
それぞれの選択肢が、どんな目的で作られているかどんな前提を持っているか
を理解することが目的です。


▼Minikube
Minikubeは、個人の検証や学習を目的としたローカル向けの Kubernetes 環境です。
1台のマシン上で完結し、比較的簡単に始められるという特徴があります。

一方で、実際の本番環境とは構成が異なることやネットワークやストレージの挙動が
単純化されているといった前提もあります。

Minikube は、「Kubernetes を一通り触ってみる」
という目的には向いていますが、本番の再現 を目的に使うものではありません。


▼Kind（Kubernetes in Docker）
Kindは、Dockerコンテナ上にKubernetesクラスタを構築する仕組みです。

・再現性が高い
・CIや自動テストで使われることが多い

という特徴があります。

Kindは、「毎回同じ状態を作れる」という点が強みであり、
検証やテスト用途に向いています。

一方で、ネットワーク構成が独特でローカル環境の制約を強く受ける
といった2点には注意が必要です。


▼k3s
k3sは、軽量なKubernetes実装 です。

必要最小限の構成でリソースの少ない環境でも動作する
という特徴があります。

そのため、エッジ環境や軽量な実運用で使われることもあります。

ただし、一部コンポーネントが省略されているため、標準的な Kubernetesとは構成が異なる
という点は理解しておく必要があります。


▼Docker Desktop 上の Kubernetes
Docker Desktop には、Kubernetes を有効化できる機能があります。

セットアップが非常に簡単であり、Dockerと一体で扱える
という点は大きなメリットです。

一方で、OSやDockerDesktopのバージョン依存が強いので、環境差が表に出にくい
といった特徴もあります。

これは、「手軽さ」と「見えにくさ」が表裏一体
である例と言えます。

■選択肢をどう捉えるべきか
ここまで見てきたように、どの環境にもそれぞれ前提があります。

ここで大切なのは、「この環境なら正しく学べる」という答えを探さないことです。

Kubernetesの設計思想や挙動は、環境が変わっても基本的に同じ
ただし、見え方や詰まりどころは変わるという性質を持っています。


■本書での方針
本書では、第2部のハンズオンにおいて、
環境差によるつまずきを最小化することを重視します。

そのため、次の章ではKillerCodaを推奨環境として扱います。

これは、これが一番正しいから、本番に一番近いから
という理由ではありません。

学習の本質と関係ない部分で消耗しないための選択です。


■この章のまとめ
この章で整理したかったのは、次の一点です。

Kubernetesはさまざまな前提の環境で動かせる
という事実です。

どの環境を使うかによって、見えるもの
詰まりやすいポイントは変わります。

だからこそ、実践に入る前に 環境の前提を意識する ことが重要です。

次の章では、本書で採用するKillerCodaについて、

もう少し具体的に見ていきます。
